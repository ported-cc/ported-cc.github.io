import"../chunks/DsnmJJEf.js";import{d as Le,o as ie,s as E,e as se,r as Pe,h as Ue,a as Ge}from"../chunks/9iyfFM9-.js";import{p as le,Z as T,a4 as oe,Y as w,P as e,f as p,T as j,X as h,a as f,b as ce,V as u,W as l,t as D,a3 as ne}from"../chunks/BqoRkx5S.js";import{i as x}from"../chunks/D2ds56Re.js";import{s as Z}from"../chunks/-ua00iTI.js";import{e as Re,s as re}from"../chunks/AJs67rg8.js";import{i as Ie,b as L}from"../chunks/Bz4er2_g.js";const He=!0,vt=Object.freeze(Object.defineProperty({__proto__:null,prerender:He},Symbol.toStringTag,{value:"Module"}));function Me(s,a,m){w(a,!e(a)),e(a)&&m()}var Ye=(s,a)=>{s.stopPropagation(),a()},je=(s,a)=>{(s.key==="Enter"||s.key===" ")&&(s.stopPropagation(),a())},De=p('<div class="server-switcher-float svelte-1e8km9x"><button class="float-button svelte-1e8km9x" title="Switch Server">🌐 <span class="hide-button svelte-1e8km9x" role="button" tabindex="0" title="Hide server switcher for this session">✕</span></button></div>'),Oe=(s,a)=>{(s.key==="Enter"||s.key===" ")&&a()},$e=s=>s.stopPropagation(),Be=(s,a)=>{s.key==="Escape"&&a()},Ne=p('<span class="status mixed-content svelte-1e8km9x">⚠️ Test manually</span>'),Ve=p('<span class="status loading svelte-1e8km9x">Testing...</span>'),ze=p('<span class="status success svelte-1e8km9x">✓ Working</span>'),Fe=p('<span class="status error svelte-1e8km9x">✗ Failed</span>'),Ke=(s,a,m)=>a(e(m)),Qe=p('<div class="mixed-content-warning svelte-1e8km9x"><div class="warning-icon svelte-1e8km9x">⚠️</div> <div class="warning-text svelte-1e8km9x">Mixed content blocked</div> <button class="test-new-tab-btn svelte-1e8km9x" title="Test server in new tab">Test in New Tab</button></div>'),We=p('<iframe class="svelte-1e8km9x"></iframe>'),Ze=(s,a,m)=>a(e(m)),Je=p('<div><div class="server-info svelte-1e8km9x"><div class="server-name svelte-1e8km9x"> </div> <div class="server-hostname svelte-1e8km9x"> </div> <div class="server-status svelte-1e8km9x"><!></div></div> <div><!></div> <button class="select-btn svelte-1e8km9x"> </button></div>'),Xe=p('<div class="modal-overlay svelte-1e8km9x" role="button" tabindex="0" aria-label="Close server switcher modal"><div class="modal-content svelte-1e8km9x" role="dialog" aria-modal="true" tabindex="0"><div class="modal-header svelte-1e8km9x"><h3 class="svelte-1e8km9x">Choose Server</h3> <button class="close-btn svelte-1e8km9x">×</button></div> <div class="current-server svelte-1e8km9x">Current: <strong> </strong> </div> <div class="servers-grid svelte-1e8km9x"></div></div></div>'),qe=p("<!> <!>",1);function et(s,a){le(a,!0);let m=T(!1),P=T(!1),k=T(oe([])),_=oe({});ie(async()=>{await Ie(),w(k,L.servers,!0),e(k).forEach(t=>{_[t.hostname]="loading"})});function O(){e(k).forEach(t=>{_[t.hostname]="loading"})}function $(t){_[t.hostname]="success"}function U(t){_[t.hostname]="error"}function G(t){if(L.currentServer=t,w(m,!1),c(t)[1]){console.warn("[ServerSwitcher] Switching to a server with different security context. Reloading page.");const n=new URL(`${t.protocol}://${t.hostname}${window.location.pathname}`),g=new URLSearchParams(window.location.search);g.set("SetServer",t.hostname),n.search=g.toString(),n.hash=window.location.hash,window.location.href=n.toString();return}window.location.reload()}function b(){w(m,!1)}function R(){w(P,!0),w(m,!1)}function c(t){if(window){const o=window.isSecureContext,n=t.protocol==="https";return o&&n?["(Secure)",!1]:!o&&n?["(Secure)",!1]:!o&&!n?["(Insecure)",!1]:o&&!n?["(Insecure) Forces switch to different host",!0]:["(Unknown security status)",!1]}else return["(Unknown security status)",!1]}function v(t){if(window){const o=window.isSecureContext,n=t.protocol==="https";return o&&!n}return!1}function S(t){const o=`${t.protocol}://${t.hostname}/test_availability.html`;window.open(o,"_blank","noopener,noreferrer")}var J=qe(),X=j(J);{var ve=t=>{var o=De(),n=u(o);n.__click=[Me,m,O];var g=h(u(n));g.__click=[Ye,R],g.__keydown=[je,R],l(n),l(o),f(t,o)};x(X,t=>{e(P)||t(ve)})}var de=h(X,2);{var ue=t=>{var o=Xe();o.__click=b,o.__keydown=[Oe,b];var n=u(o);n.__click=[$e],n.__keydown=[Be,b];var g=u(n),me=h(u(g),2);me.__click=b,l(g);var B=h(g,2),N=h(u(B)),_e=u(N,!0);l(N);var fe=h(N);l(B);var q=h(B,2);Re(q,21,()=>e(k),V=>V.name,(V,r)=>{var I=Je();let ee;var z=u(I),F=u(z),he=u(F,!0);l(F);var K=h(F,2),we=u(K,!0);l(K);var te=h(K,2),pe=u(te);{var ke=d=>{var i=Ne();f(d,i)},ge=d=>{var i=ne(),A=j(i);{var Q=y=>{var Y=Ve();f(y,Y)},Ce=y=>{var Y=ne(),Te=j(Y);{var Ae=C=>{var W=ze();f(C,W)},Ee=C=>{var W=Fe();f(C,W)};x(Te,C=>{_[e(r).hostname]==="success"?C(Ae):C(Ee,!1)},!0)}f(y,Y)};x(A,y=>{_[e(r).hostname]==="loading"?y(Q):y(Ce,!1)},!0)}f(d,i)};x(pe,d=>{v(e(r))?d(ke):d(ge,!1)})}l(te),l(z);var H=h(z,2);let ae;var xe=u(H);{var be=d=>{var i=Qe(),A=h(u(i),4);A.__click=[Ke,S,r],l(i),f(d,i)},Se=d=>{var i=We();D(()=>{Z(i,"src",`${e(r).protocol??""}://${e(r).hostname??""}/test_availability.html`),Z(i,"title",`Test ${e(r).name??""}`)}),se("load",i,()=>$(e(r))),se("error",i,()=>U(e(r))),Pe(i),f(d,i)};x(xe,d=>{v(e(r))?d(be):d(Se,!1)})}l(H);var M=h(H,2);M.__click=[Ze,G,r];var ye=u(M,!0);l(M),l(I),D((d,i,A,Q)=>{ee=re(I,1,"server-card svelte-1e8km9x",null,ee,d),E(he,e(r).name),E(we,i),ae=re(H,1,"iframe-container svelte-1e8km9x",null,ae,A),M.disabled=Q,E(ye,e(r).hostname===L.currentServer.hostname?"Current":"Select")},[()=>({current:e(r).hostname===L.currentServer.hostname}),()=>c(e(r))[0],()=>({"mixed-content":v(e(r))}),()=>!v(e(r))&&_[e(r).hostname]!=="success"]),f(V,I)}),l(q),l(n),l(o),D(()=>{E(_e,L.currentServer.name),E(fe,` (${window?window.isSecureContext?"Secure":"Insecure":"Unknown"})`)}),f(t,o)};x(de,t=>{e(m)&&t(ue)})}f(s,J),ce()}Le(["click","keydown"]);var tt=p('<meta name="use-ga4"/>'),at=p("<!> <!>",1);function dt(s,a){le(a,!0);let m={"ccported.click":"G-ER9VZ5QL8K","ccported.github.io":"G-NYC0Q0VKPP",localhost:null},P="G-DJDL65P9Y4",k=T(""),_=T(!1),O=T(!1);ie(()=>{w(O,!0);{let c=window.location.hostname;if(console.log("[R][LAYOUT][BASE] Hostname:",c),c in m){const v=m[c];console.log("[R][LAYOUT][BASE] GA4 Code:",v),v?(w(k,v,!0),w(_,!0)):w(_,!1)}else w(k,P),w(_,!0);console.log("[R][LAYOUT][BASE] Using GA4:",e(_),"with ID:",e(k)),e(_)&&e(k)&&$(e(k))}});function $(c){const v=document.createElement("script");v.async=!0,v.src=`https://www.googletagmanager.com/gtag/js?id=${c}`,document.head.appendChild(v);const S=document.createElement("script");S.innerHTML=`
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '${c}');
        `,document.head.appendChild(S)}var U=at();Ue(c=>{var v=tt();D(S=>Z(v,"content",S),[()=>String(e(_))]),f(c,v)});var G=j(U);Ge(G,()=>a.children);var b=h(G,2);{var R=c=>{et(c,{})};x(b,c=>{c(R)})}f(s,U),ce()}export{dt as component,vt as universal};
