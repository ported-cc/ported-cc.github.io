import"../chunks/DsnmJJEf.js";import{o as ie,h as re,s as D}from"../chunks/9iyfFM9-.js";import{p as ce,a4 as le,f as b,t as O,P as e,a as f,b as de,$ as me,V as d,X as E,Y as p,Z as g,W as r,a3 as fe,T as pe,n as ve}from"../chunks/BqoRkx5S.js";import{i as j}from"../chunks/D2ds56Re.js";import{e as Z,i as q}from"../chunks/AJs67rg8.js";import{r as ue,s as H}from"../chunks/-ua00iTI.js";import{b as xe}from"../chunks/BKIUCcpU.js";import{A as F}from"../chunks/C2h5rTkg.js";import{N as be}from"../chunks/gMEw5fz-.js";import{C as he,h as _e,g as we,a as ge,j as Ce,k as Pe,l as ye,i as G,f as ke,S as x,m as Ee,n as Se}from"../chunks/Bz4er2_g.js";class J extends he.classBuilder().ep({..._e,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(L,T,C,v){return[we(C,this.serialize,this.deserialize),ge(C,L.getEndpointParameterInstructions()),Ce(C)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(Pe).de(ye).build(){}var $e=b('<div class="big-ad"><!></div>'),ze=b('<div class="small-ad" style="margin-bottom: 12px;"><!></div>'),Be=b('<a download="" class="svelte-7wxcfx"> </a>'),Oe=b('<a class="svelte-7wxcfx"> </a>'),je=b('<li class="svelte-7wxcfx"><!> ></li>'),Le=b('<section class="svelte-7wxcfx"><h2 class="svelte-7wxcfx"> </h2> <!> <ul class="svelte-7wxcfx"></ul></section>'),Ve=b('<div><!> <div class="container svelte-7wxcfx"><input type="text" class="search svelte-7wxcfx"/> <!> <!></div></div>');function Ke(M,L){ce(L,!0);const T=["dos","dreamcast"];let C=g(!0),v=le({}),S=g(""),V=g(0);function A(t){return t.toLowerCase().replace(/[^a-z0-9]+/gi," ").trim().split(/\s+/)}let P=g(null),Q=g(!1),h=g(!1);const N={"ccported.github.io":{big:"c024666e-e810-47df-833e-b260321b4d84",small:"c2522ff2-7549-433b-a689-0cd63517722c"},"ccported.click":{big:"dfa19ddf-2c4c-42ac-8056-3419d7b2ecf3",small:"ce76eb8c-b859-4060-90bb-ba1089d73e67"}};async function ee(){if(x.s3Client||await G(),!x.s3Client)throw new Error("S3 Client not initialized");const t=x.s3Client,a=new J({Bucket:"ccportedroms",Delimiter:"/"}),i=(await t.send(a)).CommonPrefixes||[];for(const o of i){const n=o.Prefix?.replace("/",""),c=new J({Bucket:"ccportedroms",Prefix:o.Prefix}),W=(await t.send(c)).Contents||[];for(const B of W){const y=B.Key;if(y!==o.Prefix&&y&&n){const _=y.split("/").pop();_&&(v[n]=v[n]||[],v[n].push({console:n,name:Se(_?.split(".")[0]||"Unknown"),filename:_||"unknown"}),p(V,e(V)+1))}}}}ie(async()=>{if(await G(),ee().then(()=>{p(C,!1)}),await ke(),p(Q,x.adBlockEnabled,!0),p(h,x.adsEnabled,!0),e(h)){const t=window.location.hostname;t in N&&p(P,N[t],!0),(async()=>{const a=await Ee();if(!a){p(h,!1),x.adsEnabled=!1;return}const s=a.find(i=>i.hostname===t);if(s&&s.acode){const i=`ad-script-${s.acode}`;if(document.getElementById(i))return;const o=document.createElement("script");o.id=i,o.src=`//monu.delivery/site/${s.acode}`,o.setAttribute("data-cfasync","false"),o.defer=!0,document.head.appendChild(o)}else p(h,!1),x.adsEnabled=!1})()}});function U(t){if(!e(S).trim())return t;const a=A(e(S));return t.filter(s=>{const i=A(s.name),o=A(s.filename);return a.every(n=>i.some(c=>c.includes(n))||o.some(c=>c.includes(n)))})}var I=Ve();re(t=>{me.title="ROMs | CCPorted"});var K=d(I);be(K,{});var X=E(K,2),$=d(X);ue($);var Y=E($,2);{var te=t=>{var a=$e(),s=d(a);F(s,{get slotId(){return e(P).big}}),r(a),f(t,a)};j(Y,t=>{e(h)&&e(P)&&t(te)})}var ae=E(Y,2);Z(ae,17,()=>Object.keys(v),q,(t,a)=>{var s=fe(),i=pe(s);{var o=n=>{var c=Le(),z=d(c),W=d(z,!0);r(z);var B=E(z,2);{var y=u=>{var m=ze(),k=d(m);F(k,{get slotId(){return e(P).small}}),r(m),f(u,m)};j(B,u=>{e(h)&&e(P)&&u(y)})}var _=E(B,2);Z(_,21,()=>U(v[e(a)]),q,(u,m)=>{var k=je(),se=d(k);{var oe=w=>{var l=Be(),R=d(l);r(l),O(()=>{H(l,"href",`https://ccportedroms.s3.amazonaws.com/${e(a)}/${e(m).filename}`),D(R,`${e(m).name??""} (Download)`)}),f(w,l)},ne=w=>{var l=Oe(),R=d(l,!0);r(l),O(()=>{H(l,"href",`/emulator?core=${e(a)}&rom=${e(m).filename}`),D(R,e(m).name)}),f(w,l)};j(se,w=>{T.includes(e(a))?w(oe):w(ne,!1)})}ve(),r(k),f(u,k)}),r(_),r(c),O(u=>D(W,u),[()=>e(a).toUpperCase()]),f(n,c)};j(i,n=>{U(v[e(a)]).length&&n(o)})}f(t,s)}),r(X),r(I),O(()=>H($,"placeholder",`Search ${e(V)??""} ROMs...`)),xe($,()=>e(S),t=>p(S,t)),f(M,I),de()}export{Ke as component};
